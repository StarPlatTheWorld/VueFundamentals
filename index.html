<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue Fundamentals</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  </head>
  <body>
    <div id="app">
      <div>Learn Vue</div>
      Name:
      <!-- Data-binding variables utilising v-model directive. -->
      <!-- Utilising .trim modifier to automatically trim whitespace from the input field. -->
      <input type="text" v-model.trim="name" />
      <br /><br />
      Age:
      <!-- Utilising .lazy modifier to sync data after change events rather than input events -->
      <!-- .number is another modifier that can be applied so that numbers are not passed as strings. -->
      <input type="number" v-model.lazy="age" />
      <p>{{ name }} is {{ age }} years old.</p>
      <br /><br />
      <p>{{ counter }}</p>
      <p>{{ getFullName }}</p>
      <button v-on:click="counter++">Increment</button>
      <button v-on:click="counter--">Decrement</button>
      <br /><br />
      First Name:
      <input type="text" v-model="firstName" />
    </div>
  </body>
  <script>
    const { createApp, ref, reactive, computed, watch } = Vue;

    createApp({
      setup() {
        let name = ref("Ben");
        let age = ref(25);

        let counter = ref(0);
        let firstName = ref("Ethan");
        let lastName = ref("McFarlane");

        // Watchers the value of the counter and is an async method. Watchers are for reactive sources, such as ref (including computed refs), a reactive object, a getter function, or an array of multiple sources. If wanting to use a reactive object, use a getter method (arrow function).
        watch(
          () => counter.value,
          (newValue, oldValue) => {
            console.log("Counter value changed from", oldValue, "to", newValue);
            if (newValue == 5) {
              alert("Counter value is 5");
            }
          }
        );

        // Set getFullName to a computed property arrow function rather than standard function as each time a ref is updated, the model gets re-rendered. Computed property values are cached. Computed properties are sync and not async.
        const getFullName = computed((previous) => {
          console.log("previous value", previous);
          if (previous == "Ethan 1 McFarlane") {
            console.log("Ethan McFarlane -> Special case");
          }
          return firstName.value + " " + lastName.value;
        });

        return {
          name,
          age,
          counter,
          getFullName,
          firstName,
        };
      },
    }).mount("#app");
  </script>
</html>
